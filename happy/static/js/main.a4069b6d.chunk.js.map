{"version":3,"sources":["HappyNews/actions.js","HappyNews/api/myAjax.js","HappyNews/api/getUserInfo.js","HappyNews/rootSaga.js","HappyNews/TextPage/reducer.js","HappyNews/PicPage/reducer.js","HappyNews/rootReducer.js","HappyNews/store.js","HappyNews/PicPage/index.js","HappyNews/TextPage/index.js","HappyNews/App.js","index.js"],"names":["action","type","payload","arguments","length","undefined","Object","objectSpread","text","pic","topic","totext","myAjax","url","Promise","resolve","$","ajax","method","success","res","JSON","parse","textType","_ref2","asyncToGenerator","regenerator_default","a","mark","_callee2","wrap","_context2","prev","next","sent","abrupt","stop","this","apply","picType","_ref3","_callee3","_context3","getText","getPic","root","_context","take","actions","call","put","data","_marked","_marked2","fork","_marked3","textA","state","Actions","concat","picA","rooReducer","combineReducers","textRedux","picRedux","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","run","rootSaga","PicPage","_this","props","document","onscroll","lazyload","documentElement","scrollTop","body","clientHeight","scrollHeight","e","target","src","parentNode","style","display","_this2","console","log","texts","map","el","images","image","react_default","createElement","className","index","key","onError","error","bind","alt","Component","connect","TextPage","id","App","react_redux_es","HashRouter","overflow","Link","to","Route","path","exact","render","Redirect","component","ReactDOM","HappyNews_App","getElementById"],"mappings":"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","file":"static/js/main.a4069b6d.chunk.js","sourcesContent":["const action = (type, payload = {}) => {\r\n  return { type, ...payload };\r\n};\r\nexport const text = \"text\";\r\nexport const pic = \"pic\";\r\nexport const getText =()=> action(text);\r\nexport const getPic =()=> action(pic);//以上两个特意为saga准备监听异步\r\nexport const topic = \"topic\";\r\nexport const getTopic =(pic)=> action(topic,{pic});\r\nexport const totext = \"totext\";\r\nexport const getTotext =(text)=> action(totext,{text});","import $ from 'jquery';\r\nexport default (url)=> {\r\n  return new Promise(resolve=>{\r\n    $.ajax({\r\n      url,\r\n      method:'GET',\r\n      // dataType:'jsonp',\r\n      // jsonpCallback : \"_Callback\",\r\n      success:res=>{\r\n        if(typeof res=='string'){\r\n          res=JSON.parse(res);\r\n        }\r\n        resolve(res);\r\n      }\r\n    })\r\n  })\r\n}","import myAjax from './myAjax';\r\nconst BASEURL = \"http://localhost:80/api\";\r\nconst ALLTYPEURL = \"https://www.apiopen.top/satinGodApi?type=1&page=1\";\r\nconst TEXTTYPEURL = \"https://www.apiopen.top/satinGodApi?type=2&page=1\";\r\nconst PICTYPEURL = \"https://www.apiopen.top/satinGodApi?type=3&page=1\";\r\nconst VIDEOTYPEURL= \"https://www.apiopen.top/satinGodApi?type=5&page=1\"\r\n\r\nexport const allType = async () => {\r\n  let res = await myAjax(ALLTYPEURL);\r\n  console.log(res,'allType')\r\n  return res;\r\n};\r\nexport const textType = async () => {\r\n  let res = await myAjax(TEXTTYPEURL);\r\n  return res;\r\n};\r\nexport const picType = async () => {\r\n  let res = await myAjax(PICTYPEURL);\r\n  return res;\r\n};\r\n","import { take, put, call, fork, select, all } from \"redux-saga/effects\";\r\nimport * as actions from \"./actions\";\r\nimport {textType,picType} from './api/getUserInfo';\r\nfunction* getText() {\r\n  while (true) {\r\n    yield take(actions.text)\r\n    let res = yield call(textType);\r\n    yield put({type:actions.totext,text:res.data});\r\n  }\r\n}\r\nfunction* getPic() {\r\n  while (true) {\r\n    yield take(actions.pic)\r\n    let res = yield call(picType);\r\n    yield put({type:actions.topic,pic:res.data});\r\n  }\r\n}\r\nexport default function* root() {\r\n  yield fork(getText);\r\n  yield fork(getPic);\r\n}","import * as Actions from \"../actions\";\r\nimport { combineReducers } from \"redux\";\r\nconst textA = [];\r\n\r\nconst text=(state=textA,action)=>{\r\n  switch(action.type){\r\n    case Actions.totext:\r\n    let {text} = action;\r\n    state = state.concat(text);\r\n    return state;\r\n    default :\r\n    return state;\r\n  }\r\n}\r\n\r\nexport default text;","import * as Actions from \"../actions\";\r\nimport { combineReducers } from \"redux\";\r\nconst picA = []\r\n\r\nconst pic=(state=picA,action)=>{\r\n  switch(action.type){\r\n    case Actions.topic:\r\n    let {pic} = action;\r\n    state = state.concat(pic);\r\n    return state;\r\n    default :\r\n    return state;\r\n  }\r\n}\r\n\r\nexport default pic;","import { combineReducers } from 'redux'\r\nimport textRedux from './TextPage/reducer'\r\nimport picRedux from './PicPage/reducer'\r\n\r\nconst rooReducer=combineReducers({\r\n  textRedux,\r\n  picRedux\r\n});\r\nexport default rooReducer;","import { createStore,applyMiddleware } from \"redux\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport rootSaga from \"./rootSaga\";\r\nimport rootReducer from \"./rootReducer\";\r\nlet sagaMiddleware = createSagaMiddleware();\r\n\r\nlet store = createStore(rootReducer, applyMiddleware(sagaMiddleware));\r\n\r\n// window.store = store; 方便在控制台\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\nimport '../index.css';\r\nclass PicPage extends Component{\r\n  componentDidMount(){\r\n    this.props.getPic();\r\n    document.onscroll=()=>{\r\n      this.lazyload()\r\n    }\r\n  }\r\n  lazyload(){\r\n    let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n    let clientHeight = document.documentElement.clientHeight;\r\n    let scrollHeight = document.documentElement.scrollHeight;\r\n    if (scrollTop + clientHeight +10 >= scrollHeight) { \r\n      this.props.getPic()\r\n    }\r\n  }\r\n  error(e){\r\n    e.target.src=''\r\n    let par = e.target.parentNode;\r\n    par.style.display='none';\r\n  }\r\n  render(){\r\n    let pic  = this.props.picRedux;\r\n    console.log(pic,'pic')\r\n    let texts = pic.map(el=>el.text);\r\n    let images = pic.map(el=>el.image);\r\n    return (\r\n    <div className='content'>\r\n      {images.map((el,index)=>{\r\n        return( \r\n        <div className='happy_box' key={el+index}>\r\n          <p className='happy_title happy_text'>{texts[index]}</p>\r\n          <img onError={this.error.bind(this)} src={el} alt=\"\" className='happy_img'/>\r\n        </div>\r\n        ) \r\n      })}\r\n    </div>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => state;\r\nconst getPic=actions.getPic;\r\nexport default connect(mapStateToProps,{getPic})(PicPage);\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../actions\";\r\nimport '../index.css';\r\nclass TextPage extends Component{\r\n  componentDidMount(){\r\n    this.props.getText()\r\n    document.onscroll=()=>{\r\n      this.lazyload()\r\n    }\r\n  }\r\n\r\n  lazyload(){\r\n    let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n    let clientHeight = document.documentElement.clientHeight;\r\n    let scrollHeight = document.documentElement.scrollHeight;\r\n    console.log(scrollTop + clientHeight +10 >= scrollHeight)\r\n    if (scrollTop + clientHeight +10 >= scrollHeight) { \r\n      this.props.getText()\r\n    }\r\n  }\r\n\r\n  render(){\r\n    let texts = this.props.textRedux;\r\n    return (\r\n      <div id='div' className='content'>\r\n        {texts.map((el,index)=>{\r\n        return( \r\n        <div className='happy_box'  key={el+index}>\r\n          {/* <img className='happy_logo' src=\"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2048439579,1840605849&fm=58&s=B1B4CF32D4E509137437F3E90300302D&bpow=121&bpoh=75\" alt=\"\"/> */}\r\n          <p className='happy_title'>{el.text}</p>\r\n        </div>\r\n        ) \r\n      })}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => state;\r\nconst getText=actions.getText;\r\nexport default connect(mapStateToProps,{getText})(TextPage);\r\n","import React, { Component } from 'react';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport PicPage from './PicPage';\r\nimport TextPage from './TextPage';\r\nimport './index.css';\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Redirect,\r\n  Link\r\n} from \"react-router-dom\";\r\nclass App extends Component {\r\n      render() {\r\n        return (\r\n          <Provider store={store}>\r\n            <Router>\r\n              <div style={{overflow:'hidden'}}>\r\n                <div className='tab_nav_a'>\r\n                  <Link to=\"/pic\">\r\n                  <span className='nav_l'>\r\n                  图片\r\n                  </span>\r\n                  </Link>\r\n                  <Link to=\"/text\">\r\n                  <span className='nav_r'>\r\n                  段子\r\n                  </span>\r\n                  </Link>\r\n                </div>\r\n                <Route path=\"/\" exact render={() => <Redirect to=\"/text\" />} />\r\n                <Route path=\"/text\" exact component={TextPage} />\r\n                <Route path=\"/pic\" exact component={PicPage} />\r\n              </div>\r\n            </Router>\r\n          </Provider>\r\n        );\r\n    }\r\n}\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './HappyNews/App';\nReactDOM.render( \n  <App/> ,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}